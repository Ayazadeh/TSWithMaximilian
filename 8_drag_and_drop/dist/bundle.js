(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}const n=(e,t,n)=>{const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}};var r;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class l extends i{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new l),this.instance}addProject(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.Active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const o=l.getInstance();class a extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1,max:5};if(t({value:e,required:!0})&&t(s)&&t(i))return[e,n,+r];alert("Invalid input, please try again!")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;o.addProject(e,n,r),this.clearInputs()}}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],a.prototype,"submitHandler",null);class c extends e{get persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){console.log("drag start handler ",e),e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("drag end handler ",e)}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned",this.element.querySelector("p").textContent=this.project.description}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],c.prototype,"dragStartHandler",null);var d=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class p extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){console.log("drop handler",e);const t=e.dataTransfer.getData("text/plain");o.moveProject(t,"active"===this.type?r.Active:r.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),o.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new c(this.element.querySelector("ul").id,e)}}d([n],p.prototype,"dragOverHandler",null),d([n],p.prototype,"dropHandler",null),d([n],p.prototype,"dragLeaveHandler",null),new a,new p("active"),new p("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtRLFFBQVE0RCxjQUFjLE1BQU8xRCxHQUFJNkcsRUFFeEQsRUFuREEsR0FEQzdGLEcsb0NBVUQsR0FEQ0EsRyxnQ0FTRCxHQURDQSxHLHFDQ2pDRixJQUFJd0MsRUFDSixJQUFJa0MsRUFBWSxVQUNoQixJQUFJQSxFQUFZLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly84X2RyYWdfYW5kX2Ryb3AvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly84X2RyYWdfYW5kX2Ryb3AvLi9zcmMvdXRpbC92YWxpZGF0aW9uLnRzIiwid2VicGFjazovLzhfZHJhZ19hbmRfZHJvcC8uL3NyYy9kZWNvcmF0b3JzL2F1dG9iaW5kLnRzIiwid2VicGFjazovLzhfZHJhZ19hbmRfZHJvcC8uL3NyYy9tb2RlbHMvcHJvamVjdC50cyIsIndlYnBhY2s6Ly84X2RyYWdfYW5kX2Ryb3AvLi9zcmMvc3RhdGUvcHJvamVjdC1zdGF0ZS50cyIsIndlYnBhY2s6Ly84X2RyYWdfYW5kX2Ryb3AvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWlucHV0LnRzIiwid2VicGFjazovLzhfZHJhZ19hbmRfZHJvcC8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaXRlbS50cyIsIndlYnBhY2s6Ly84X2RyYWdfYW5kX2Ryb3AvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vOF9kcmFnX2FuZF9kcm9wLy4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wb25lbnQgQmFzZSBDbGFzc1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBIVE1MRWxlbWVudCwgVSBleHRlbmRzIEhUTUxFbGVtZW50PiB7XHJcblx0dGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cdGhvc3RFbGVtZW50OiBUO1xyXG5cdGVsZW1lbnQ6IFU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHRlbXBsYXRlSWQ6IHN0cmluZywgaG9zdEVsZW1lbnRJZDogc3RyaW5nLCBpbnNlcnRBdFN0YXJ0OiBib29sZWFuLCBuZXdFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuXHRcdHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVJZCkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblx0XHR0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFQ7XHJcblxyXG5cdFx0Y29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LCB0cnVlKTtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xyXG5cdFx0aWYgKG5ld0VsZW1lbnRJZCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGF0dGFjaChpbnNlcnRBdEJlZ2lubmluZzogYm9vbGVhbikge1xyXG5cdFx0dGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoaW5zZXJ0QXRCZWdpbm5pbmcgPyBcImFmdGVyYmVnaW5cIiA6IFwiYmVmb3JlZW5kXCIsIHRoaXMuZWxlbWVudCk7XHJcblx0fVxyXG5cclxuXHRhYnN0cmFjdCBjb25maWd1cmUoKTogdm9pZDtcclxuXHRhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IHZvaWQ7XHJcbn1cclxuIiwiLy8gVmFsaWRhdGlvblxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRhYmxlIHtcclxuXHR2YWx1ZTogc3RyaW5nIHwgbnVtYmVyO1xyXG5cdHJlcXVpcmVkPzogYm9vbGVhbjsgLy8gcXVlc3Rpb24gbWFyayAnPycgbWVhbnMgb3B0aW9uYWwgb3IgbGlrZSB0aGlzIC0+IGJvb2xlYW4gfCB1bmRlZmluZWRcclxuXHRtaW5MZW5ndGg/OiBudW1iZXI7XHJcblx0bWF4TGVuZ3RoPzogbnVtYmVyO1xyXG5cdG1pbj86IG51bWJlcjtcclxuXHRtYXg/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0YWJsZUlucHV0OiBWYWxpZGF0YWJsZSkge1xyXG5cdGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuXHRpZiAodmFsaWRhdGFibGVJbnB1dC5yZXF1aXJlZCkge1xyXG5cdFx0aXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggIT09IDA7XHJcblx0fVxyXG5cdGlmICh2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsICYmIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcblx0XHRpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aDtcclxuXHR9XHJcblx0aWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoIDw9IHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoO1xyXG5cdH1cclxuXHRpZiAodmFsaWRhdGFibGVJbnB1dC5taW4gIT0gbnVsbCAmJiB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG5cdFx0aXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pbjtcclxuXHR9XHJcblx0aWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09IFwibnVtYmVyXCIpIHtcclxuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXg7XHJcblx0fVxyXG5cdHJldHVybiBpc1ZhbGlkO1xyXG59XHJcbiIsIi8vIGF1dG9iaW5kIGRlY29yYXRvclxyXG5leHBvcnQgY29uc3QgQXV0b2JpbmQgPSAodGFyZ2V0OiBhbnksIG1ldGhvZE5hbWU6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSA9PiB7XHJcblx0Y29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xyXG5cdGNvbnN0IGFkakRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuXHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuXHRcdGVudW1lcmFibGU6IGZhbHNlLFxyXG5cdFx0Z2V0KCkge1xyXG5cdFx0XHRjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcclxuXHRcdFx0cmV0dXJuIGJvdW5kRm47XHJcblx0XHR9LFxyXG5cdH07XHJcblx0cmV0dXJuIGFkakRlc2NyaXB0b3I7XHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIFByb2plY3RTdGF0dXMge1xyXG5cdEFjdGl2ZSxcclxuXHRGaW5pc2hlZCxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogc3RyaW5nLCBwdWJsaWMgdGl0bGU6IHN0cmluZywgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHB1YmxpYyBwZW9wbGU6IG51bWJlciwgcHVibGljIHN0YXR1czogUHJvamVjdFN0YXR1cykge31cclxufVxyXG4iLCJpbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSBcIi4uL21vZGVscy9wcm9qZWN0XCI7XHJcblxyXG4vLyBQcm9qZWN0IFN0YXRlIE1hbmFnZW1lbnRcclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG5cclxuY2xhc3MgU3RhdGU8VD4ge1xyXG5cdHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuXHJcblx0YWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdFN0YXRlIGV4dGVuZHMgU3RhdGU8UHJvamVjdD4ge1xyXG5cdHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtdO1xyXG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQcm9qZWN0U3RhdGU7XHJcblxyXG5cdHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldEluc3RhbmNlKCkge1xyXG5cdFx0aWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RTdGF0ZSgpO1xyXG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcblx0fVxyXG5cclxuXHRhZGRQcm9qZWN0KHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG51bU9mUGVvcGxlOiBudW1iZXIpIHtcclxuXHRcdC8vIGNvbnN0IG5ld1Byb2plY3QgPSB7XHJcblx0XHQvLyBcdGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksXHJcblx0XHQvLyBcdHRpdGxlOiB0aXRsZSxcclxuXHRcdC8vIFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxyXG5cdFx0Ly8gXHRwZW9wbGU6IG51bU9mUGVvcGxlLFxyXG5cdFx0Ly8gfTtcclxuXHRcdGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksIHRpdGxlLCBkZXNjcmlwdGlvbiwgbnVtT2ZQZW9wbGUsIFByb2plY3RTdGF0dXMuQWN0aXZlKTtcclxuXHRcdHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuXHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRtb3ZlUHJvamVjdChwcm9qZWN0SWQ6IHN0cmluZywgbmV3U3RhdHVzOiBQcm9qZWN0U3RhdHVzKSB7XHJcblx0XHRjb25zdCBwcm9qZWN0ID0gdGhpcy5wcm9qZWN0cy5maW5kKChwcmopID0+IHByai5pZCA9PT0gcHJvamVjdElkKTtcclxuXHRcdGlmIChwcm9qZWN0ICYmIHByb2plY3Quc3RhdHVzICE9PSBuZXdTdGF0dXMpIHtcclxuXHRcdFx0cHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcblx0XHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZUxpc3RlbmVycygpIHtcclxuXHRcdGZvciAoY29uc3QgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG5cdFx0XHRsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7IC8vIGFycmF5LnNsaWNlKCkgcmV0dXJucyBhIGNvcHkgb2YgdGhlIGFycmF5XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKCk7XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gXCIuLi91dGlsL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHsgQXV0b2JpbmQgfSBmcm9tIFwiLi4vZGVjb3JhdG9ycy9hdXRvYmluZFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdC1zdGF0ZVwiO1xyXG5cclxuLy8gUHJvamVjdElucHV0IGNsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxGb3JtRWxlbWVudD4ge1xyXG5cdHRpdGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdHBlb3BsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcihcInByb2plY3QtaW5wdXRcIiwgXCJhcHBcIiwgdHJ1ZSwgXCJ1c2VyLWlucHV0XCIpO1xyXG5cclxuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0dGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHR0aGlzLnBlb3BsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3Blb3BsZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblx0fVxyXG5cclxuXHRjb25maWd1cmUoKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyQ29udGVudCgpIHt9XHJcblxyXG5cdHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xyXG5cdFx0Y29uc3QgZW50ZXJlZFRpdGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZTtcclxuXHRcdGNvbnN0IGVudGVyZWREZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWU7XHJcblx0XHRjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcblx0XHRcdHZhbHVlOiBlbnRlcmVkVGl0bGUsXHJcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG5cdFx0XHR2YWx1ZTogZW50ZXJlZERlc2NyaXB0aW9uLFxyXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcclxuXHRcdFx0bWluTGVuZ3RoOiA1LFxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IHBlb3BsZVZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHtcclxuXHRcdFx0dmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxyXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcclxuXHRcdFx0bWluOiAxLFxyXG5cdFx0XHRtYXg6IDUsXHJcblx0XHR9O1xyXG5cclxuXHRcdGlmICghdmFsaWRhdGUodGl0bGVWYWxpZGF0YWJsZSkgfHwgIXZhbGlkYXRlKGRlc2NyaXB0aW9uVmFsaWRhdGFibGUpIHx8ICF2YWxpZGF0ZShwZW9wbGVWYWxpZGF0YWJsZSkpIHtcclxuXHRcdFx0YWxlcnQoXCJJbnZhbGlkIGlucHV0LCBwbGVhc2UgdHJ5IGFnYWluIVwiKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBbZW50ZXJlZFRpdGxlLCBlbnRlcmVkRGVzY3JpcHRpb24sICtlbnRlcmVkUGVvcGxlXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2xlYXJJbnB1dHMoKSB7XHJcblx0XHR0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuXHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG5cdFx0dGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG5cdH1cclxuXHJcblx0QEF1dG9iaW5kXHJcblx0cHJpdmF0ZSBzdWJtaXRIYW5kbGVyKGV2ZW50OiBFdmVudCkge1xyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KCk7XHJcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh1c2VySW5wdXQpKSB7XHJcblx0XHRcdGNvbnN0IFt0aXRsZSwgZGVzYywgcGVvcGxlXSA9IHVzZXJJbnB1dDtcclxuXHRcdFx0cHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsIGRlc2MsIHBlb3BsZSk7XHJcblx0XHRcdHRoaXMuY2xlYXJJbnB1dHMoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSBcIi4uL21vZGVscy9kcmFnLWRyb3BcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vYmFzZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBBdXRvYmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcblxyXG4vLyBQcm9qZWN0SXRlbSBDbGFzc1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdEl0ZW0gZXh0ZW5kcyBDb21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD4gaW1wbGVtZW50cyBEcmFnZ2FibGUge1xyXG5cdHByaXZhdGUgcHJvamVjdDogUHJvamVjdDtcclxuXHJcblx0Z2V0IHBlcnNvbnMoKSB7XHJcblx0XHRpZiAodGhpcy5wcm9qZWN0LnBlb3BsZSA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gXCIxIHBlcnNvblwiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGAke3RoaXMucHJvamVjdC5wZW9wbGV9IHBlcnNvbnNgO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3RydWN0b3IoaG9zdElkOiBzdHJpbmcsIHByb2plY3Q6IFByb2plY3QpIHtcclxuXHRcdHN1cGVyKFwic2luZ2xlLXByb2plY3RcIiwgaG9zdElkLCBmYWxzZSwgcHJvamVjdC5pZCk7XHJcblx0XHR0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuXHR9XHJcblxyXG5cdEBBdXRvYmluZFxyXG5cdGRyYWdTdGFydEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJkcmFnIHN0YXJ0IGhhbmRsZXIgXCIsIGV2ZW50KTtcclxuXHRcdGV2ZW50LmRhdGFUcmFuc2ZlciEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgdGhpcy5wcm9qZWN0LmlkKTtcclxuXHRcdGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xyXG5cdH1cclxuXHJcblx0ZHJhZ0VuZEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJkcmFnIGVuZCBoYW5kbGVyIFwiLCBldmVudCk7XHJcblx0fVxyXG5cclxuXHRjb25maWd1cmUoKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIHRoaXMuZHJhZ0VuZEhhbmRsZXIpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyQ29udGVudCgpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIikhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoM1wiKSEudGV4dENvbnRlbnQgPSB0aGlzLnBlcnNvbnMgKyBcIiBhc3NpZ25lZFwiO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vYmFzZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7IFByb2plY3QsIFByb2plY3RTdGF0dXMgfSBmcm9tIFwiLi4vbW9kZWxzL3Byb2plY3RcIjtcclxuaW1wb3J0IHsgQXV0b2JpbmQgfSBmcm9tIFwiLi4vZGVjb3JhdG9ycy9hdXRvYmluZFwiO1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdC1zdGF0ZVwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gXCIuL3Byb2plY3QtaXRlbVwiO1xyXG5cclxuLy8gUHJvamVjdExpc3QgY2xhc3NcclxuZXhwb3J0IGNsYXNzIFByb2plY3RMaXN0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRWxlbWVudD4gaW1wbGVtZW50cyBEcmFnVGFyZ2V0IHtcclxuXHRhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgdHlwZTogXCJhY3RpdmVcIiB8IFwiZmluaXNoZWRcIikge1xyXG5cdFx0c3VwZXIoXCJwcm9qZWN0LWxpc3RcIiwgXCJhcHBcIiwgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYCk7XHJcblx0XHR0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBbXTtcclxuXHJcblx0XHR0aGlzLmNvbmZpZ3VyZSgpO1xyXG5cdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XHJcblx0fVxyXG5cclxuXHRAQXV0b2JpbmRcclxuXHRkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0aWYgKGV2ZW50LmRhdGFUcmFuc2ZlciAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09IFwidGV4dC9wbGFpblwiKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhO1xyXG5cdFx0XHRsaXN0RWwuY2xhc3NMaXN0LmFkZChcImRyb3BwYWJsZVwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdEBBdXRvYmluZFxyXG5cdGRyb3BIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiZHJvcCBoYW5kbGVyXCIsIGV2ZW50KTtcclxuXHRcdGNvbnN0IHByaklkID0gZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTtcclxuXHJcblx0XHRwcm9qZWN0U3RhdGUubW92ZVByb2plY3QocHJqSWQsIHRoaXMudHlwZSA9PT0gXCJhY3RpdmVcIiA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZCk7XHJcblx0fVxyXG5cclxuXHRAQXV0b2JpbmRcclxuXHRkcmFnTGVhdmVIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidWxcIikhO1xyXG5cdFx0bGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wcGFibGVcIik7XHJcblx0fVxyXG5cclxuXHRjb25maWd1cmUoKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy5kcm9wSGFuZGxlcik7XHJcblxyXG5cdFx0cHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0czogUHJvamVjdFtdKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlbGV2YW50UHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIoKHByaikgPT4ge1xyXG5cdFx0XHRcdGlmICh0aGlzLnR5cGUgPT09IFwiYWN0aXZlXCIpIHtcclxuXHRcdFx0XHRcdHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkFjdGl2ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuRmluaXNoZWQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSByZWxldmFudFByb2plY3RzO1xyXG5cdFx0XHR0aGlzLnJlbmRlclByb2plY3RzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlckNvbnRlbnQoKSB7XHJcblx0XHRjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSEuaWQgPSBsaXN0SWQ7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImgyXCIpIS50ZXh0Q29udGVudCA9IHRoaXMudHlwZS50b1VwcGVyQ2FzZSgpICsgXCIgUFJPSkVDVFNcIjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKSB7XHJcblx0XHRjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgKSEgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuXHRcdGxpc3RFbC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cdFx0Zm9yIChjb25zdCBwcmpJdGVtIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG5cdFx0XHRuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSEuaWQsIHByakl0ZW0pO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgeyBQcm9qZWN0SW5wdXQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtaW5wdXRcIjtcclxuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdFwiO1xyXG5cclxubmV3IFByb2plY3RJbnB1dCgpO1xyXG5uZXcgUHJvamVjdExpc3QoXCJhY3RpdmVcIik7XHJcbm5ldyBQcm9qZWN0TGlzdChcImZpbmlzaGVkXCIpO1xyXG4iXSwibmFtZXMiOlsiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5uaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJ2YWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInJlcXVpcmVkIiwidmFsdWUiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJBdXRvYmluZCIsInRhcmdldCIsIm1ldGhvZE5hbWUiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiYmluZCIsIlByb2plY3RTdGF0dXMiLCJQcm9qZWN0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBlb3BsZSIsInN0YXR1cyIsIlN0YXRlIiwibGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lckZuIiwicHVzaCIsIlByb2plY3RTdGF0ZSIsInN1cGVyIiwicHJvamVjdHMiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiYWRkUHJvamVjdCIsIm51bU9mUGVvcGxlIiwibmV3UHJvamVjdCIsIk1hdGgiLCJyYW5kb20iLCJBY3RpdmUiLCJ1cGRhdGVMaXN0ZW5lcnMiLCJtb3ZlUHJvamVjdCIsInByb2plY3RJZCIsIm5ld1N0YXR1cyIsInByb2plY3QiLCJmaW5kIiwicHJqIiwic2xpY2UiLCJwcm9qZWN0U3RhdGUiLCJQcm9qZWN0SW5wdXQiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImdhdGhlclVzZXJJbnB1dCIsImVudGVyZWRUaXRsZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwicGVvcGxlVmFsaWRhdGFibGUiLCJhbGVydCIsImNsZWFySW5wdXRzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImRlc2MiLCJQcm9qZWN0SXRlbSIsInBlcnNvbnMiLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiY29uc29sZSIsImxvZyIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJkcmFnT3ZlckhhbmRsZXIiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImRyb3BIYW5kbGVyIiwicHJqSWQiLCJnZXREYXRhIiwiRmluaXNoZWQiLCJkcmFnTGVhdmVIYW5kbGVyIiwicmVtb3ZlIiwicmVsZXZhbnRQcm9qZWN0cyIsImZpbHRlciIsInJlbmRlclByb2plY3RzIiwibGlzdElkIiwidG9VcHBlckNhc2UiLCJpbm5lckhUTUwiLCJwcmpJdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==